/*******************************************************
* Copyright (C) 2018-2022 WP Interactive Media, Inc. - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
*******************************************************/
(()=>{"use strict";const e=chrome.runtime.id;var o=console.log.bind(window.console);const t=new class{addListener(e){chrome.runtime.onMessage.addListener(e)}removeListener(e){chrome.runtime.onMessage.removeListener(e)}sendMessageToTabAsync(e,t,n=2e4){return new Promise(((i,s)=>{const r=setTimeout((()=>{s()}),n);try{chrome.tabs.sendMessage(t,e,(t=>{chrome.runtime.lastError&&o(chrome.runtime.lastError.message+JSON.stringify(e)),clearTimeout(r),i(t)}))}catch(e){clearTimeout(r),s(e)}}))}o(o,t){return new Promise(((n,i)=>{let s=null;t&&(s=setTimeout((()=>{i({error:"Send Message Timeout"})}),t));try{chrome.runtime.sendMessage(e,o,(e=>{chrome.runtime.lastError&&console.log(chrome.runtime.lastError.message+JSON.stringify(o)),s&&clearTimeout(s),n(e)}))}catch(e){s&&clearTimeout(s),i(e)}}))}};var n;!function(e){e.JOIN_SESSION="joinSession",e.GET_VIDEO_DATA="getVideoData",e.LOAD_SESSION="loadSession",e.NO_SESSION_DATA="noSessionData",e.TEARDOWN="teardown",e.ON_VIDEO_UPDATE="onVideoUpdate",e.SOCKET_LOST_CONNECTION="socketLostConnection",e.REBOOT="socketReconnect",e.LOG_EVENT="logEvent",e.LOG_EXPERIMENT="logExpirement",e.STAY_ALIVE="stayAlive",e.LOAD_CHAT_WINDOW="loadChatWindow",e.RESET_CHAT_WINDOW="resetChatWindow",e.HIDE_CHAT_WINDOW="hideChatWindow"}(n||(n={}));class i extends class extends class{constructor(e,o,t){this.sender=e,this.target=o,this.type=t}}{constructor(e,o,t){super(e,o,t),this.type=t}}{constructor(e,o,t){super(e,o,n.LOG_EVENT),this.data=t,this.sender=e,this.target=o}}try{if(!window.ti){if(window.ti=!0,window.location.hostname.includes(".amazon.")&&!(window.location.href.includes("?autoplay=1")||window.location.href.includes("/video")||document.title.includes("Prime Video")||null!=document.querySelector(".rendererContainer video")&&null!=document.querySelector(".dv-player-fullscreen")))throw new Error("No log");t.o(new i("Content_Script","Service_Background",{name:"on_init",action:{description:"Content script is ready and initialized"}}))}}catch(e){}})();